# SEO Guide — towing-no-1.com

## Table of Contents
1. [Architecture Overview](#architecture-overview)
2. [How to Update Metadata](#how-to-update-metadata)
3. [Structured Data (JSON-LD)](#structured-data-json-ld)
4. [Sitemap](#sitemap)
5. [robots.txt](#robotstxt)
6. [Canonical URLs](#canonical-urls)
7. [Adding New Pages](#adding-new-pages)
8. [Adding Blog Posts](#adding-blog-posts)
9. [CI Checks](#ci-checks)
10. [Search Console Submission](#search-console-submission)
11. [Indexing Remediation](#indexing-remediation)
12. [Release Checklist](#release-checklist)
13. [Commit Message Convention](#commit-message-convention)

---

## Architecture Overview

This is a **Next.js 14+ App Router** project deployed on **Vercel** at `https://towing-no-1.com`.

| File | Purpose |
|------|---------|
| `app/layout.tsx` | Root layout, global metadata defaults, `metadataBase`, global JSON-LD (`LocalBusiness` + `Organization`), and shared `<head>` tags |
| `app/robots.ts` | Generates `/robots.txt` at build time |
| `app/sitemap.ts` | Generates `/sitemap.xml` at build time, includes both static pages and blog posts |
| `lib/blog-posts.ts` | Single source of truth for all blog post data |
| `scripts/seo-check.mjs` | CLI tool that audits all page files for SEO completeness |
| `.github/workflows/seo.yml` | CI pipeline: runs SEO checks and build validation on every PR |

### Key SEO Rule: Server Components Only for Metadata

> **Next.js App Router only picks up `metadata` exports from Server Components.**  
> Client components (`"use client"`) **cannot** export `metadata`.

To add metadata to a page that needs client-side interactivity:
1. Keep the page file as a **server component** (no `"use client"`)
2. Move interactive UI into a separate file (e.g., `components/ContactContent.tsx`) with `"use client"` at the top
3. Import and render the client component from the server component page

**Correct pattern:**
```tsx
// app/contact/page.tsx — SERVER COMPONENT
import type { Metadata } from "next";
import ContactContent from "@/components/ContactContent"; // client component

export const metadata: Metadata = { ... };

export default function ContactPage() {
  return <ContactContent />;
}
```

---

## How to Update Metadata

### Page Title
- File: `app/<page>/page.tsx`
- Property: `metadata.title`
- **Rules:** ≤ 60 characters. Include primary keyword + brand. No keyword stuffing.
- **Example:** `"Emergency Towing Delta BC | TowingNo.1"`

### Meta Description
- Property: `metadata.description`
- **Rules:** 120–155 characters. One call-to-action. Include phone number or service area.
- **Example:** `"Fast 24/7 emergency towing in Delta, BC. Call TowingNo.1 at (778) 859-1457 for battery boost, flat tire, lockout, and vehicle recovery."`

### Open Graph
Update `openGraph.title`, `openGraph.description`, and `openGraph.url` to match the page title/description and page canonical URL. The OG image at `https://towing-no-1.com/preview.jpg` is used sitewide — replace with a page-specific image if available.

### Twitter Card
Keep `twitter.title`, `twitter.description`, and `twitter.images` in sync with the OG values.

### Canonical URL
Always set `alternates.canonical` to the exact public URL of the page:
```ts
alternates: {
  canonical: "https://towing-no-1.com/contact",
},
```

---

## Structured Data (JSON-LD)

### Global Schema (layout.tsx)
The root layout renders two schemas:
- **`Organization`** — company identity, contact point, social links
- **`LocalBusiness`** — service area, hours, phone, offers

To update business info (phone, address, service cities), edit the inline JSON in `app/layout.tsx` inside the `<script type="application/ld+json">` block.

### Page-Level Schema
- **Services page** (`app/services/page.tsx`) — `ItemList` of `Service` items
- **Blog post pages** (`app/blog/[slug]/page.tsx`) — `Article` schema with author, publisher, date

To add a new schema to a page, add a `<script type="application/ld+json">` block in the page's JSX return (only works in server components).

**Always validate schemas at:** https://validator.schema.org/

---

## Sitemap

The sitemap is auto-generated at `https://towing-no-1.com/sitemap.xml` by `app/sitemap.ts`.

It includes:
- Static routes: `/`, `/services`, `/about`, `/contact`, `/blog`
- Dynamic blog post routes: pulled from `lib/blog-posts.ts`

When you add new pages, add them to the `staticRoutes` array in `app/sitemap.ts`.

**After deploying sitemap changes:**
1. Check it renders correctly: `https://towing-no-1.com/sitemap.xml`
2. Submit to Google Search Console → Sitemaps → `https://towing-no-1.com/sitemap.xml`
3. Submit to Bing Webmaster Tools if desired

---

## robots.txt

Generated by `app/robots.ts`. Current rules:
- Allow all crawlers on all pages (`allow: '/'`)
- Disallow `api/` and `_next/` paths
- Points to canonical sitemap URL: `https://towing-no-1.com/sitemap.xml`

**Never add `disallow: '/'` to the production robots.txt.**

---

## Canonical URLs

Every indexable page must set `alternates.canonical` in its `metadata` export. This tells Google the preferred URL for the page and prevents duplicate content issues.

```ts
alternates: {
  canonical: "https://towing-no-1.com/services",
},
```

The `metadataBase` in `layout.tsx` is set to `https://towing-no-1.com`. All relative canonical URLs resolve against this base.

---

## Adding New Pages

1. Create `app/<new-page>/page.tsx` as a **server component** (no `"use client"`)
2. Export `metadata` with unique `title`, `description`, `alternates.canonical`, `openGraph`, and `twitter`
3. Add the new URL to `app/sitemap.ts` in the `staticRoutes` array
4. Internally link to the new page from at least one existing page (Navbar, Footer, or relevant content)
5. Run `node scripts/seo-check.mjs` to verify no SEO errors

---

## Adding Blog Posts

1. Open `lib/blog-posts.ts`
2. Add a new object to the `blogPosts` array with all required fields:

```ts
{
  id: 7,
  title: "Title Here (under 60 chars)",
  excerpt: "120–155 character excerpt with primary keyword.",
  date: "March 1, 2026",
  image: "https://images.unsplash.com/photo-XXXX?q=80&w=800",
  slug: "url-friendly-slug",
  keywords: ["keyword1", "keyword2"],
  content: `Full article content in markdown-like format...`,
}
```

3. The sitemap and blog listing page will automatically include the new post.
4. The blog detail page at `/blog/<slug>` gets individual `Article` JSON-LD and `<title>/<meta>` from `generateMetadata`.

---

## CI Checks

GitHub Actions runs on every PR (`.github/workflows/seo.yml`):

| Job | What it checks |
|-----|---------------|
| `seo-check` | Runs `scripts/seo-check.mjs` — fails if any page is missing title, description, or canonical |
| `build` | Full Next.js build — fails if any TypeScript/import errors |
| `validate-structured-data` | Verifies JSON-LD blocks are present in key files |
| `robots-sitemap-check` | Verifies robots.ts and layout.tsx don't reference wrong domains |

**To run SEO checks locally:**
```bash
node scripts/seo-check.mjs
```

---

## Search Console Submission

### Initial Setup (one-time)
1. Go to https://search.google.com/search-console/
2. Add property: `https://towing-no-1.com`
3. Verify via HTML tag, DNS record, or Google Analytics
4. Go to **Sitemaps** → Enter `https://towing-no-1.com/sitemap.xml` → Submit

### After Major Changes
1. Deploy to production
2. In Search Console → **URL Inspection** → Enter the changed URL
3. Click **Request Indexing**
4. Monitor **Coverage** report over the next 7–14 days

### Monitoring
- Check **Coverage** report weekly for: Excluded, Error, and Valid pages
- Check **Core Web Vitals** report monthly
- Check **Rich Results** report after schema changes at: https://search.google.com/test/rich-results

---

## Indexing Remediation

Common Search Console reasons and fixes:

| SC Reason | Root Cause | Fix |
|-----------|-----------|-----|
| "Crawled - currently not indexed" | Thin content or low quality | Expand page content, add FAQ, improve keyword relevance |
| "Discovered - currently not indexed" | Internal linking too weak | Add more internal links pointing to this page |
| "Excluded by 'noindex' tag" | `noindex` in metadata or response header | Remove `robots: { index: false }` from metadata |
| "Blocked by robots.txt" | `disallow` rule in robots.ts | Fix `app/robots.ts` and redeploy |
| "Duplicate without selected canonical" | Wrong or missing canonical | Set correct `alternates.canonical` in metadata |
| "Page with redirect" | Redirect chain | Ensure 301 redirects go directly to final URL |
| "Soft 404" | Page returns 200 but has no meaningful content | Add real content or return proper 404 |
| "Not found (404)" | Broken URL | Fix internal links; if old URL changed, add 301 redirect in vercel.json |

---

## Release Checklist

Before merging any SEO-affecting PR:

- [ ] Every modified page has unique `<title>` (≤ 60 chars)
- [ ] Every modified page has unique `<meta description>` (120–155 chars)
- [ ] `alternates.canonical` is set to the exact production URL
- [ ] `openGraph` and `twitter` metadata are set and match visible content
- [ ] No `"use client"` directive on the `page.tsx` that exports `metadata`
- [ ] New pages added to `app/sitemap.ts`
- [ ] All images have descriptive `alt` attributes
- [ ] Internal links use descriptive anchor text
- [ ] JSON-LD schema validated at https://validator.schema.org/
- [ ] CI checks pass (`node scripts/seo-check.mjs`)
- [ ] Tested with `next build` locally

---

## Commit Message Convention

```
seo: fix metadataBase to use production domain
seo: add canonical tags to all pages
seo: add Service JSON-LD schema to /services
seo: create blog/[slug] dynamic route for blogs
seo: update sitemap to include 6 blog posts
seo: add HSTS and security headers to vercel.json
perf: add image formats avif/webp to next.config.mjs
fix: convert about/contact pages to server component wrappers
```

---

## Key Keyword Targets

| Page | Primary Keyword | Secondary Keywords |
|------|-----------------|--------------------|
| `/` | `emergency towing BC` | `24/7 tow truck Vancouver`, `roadside assistance Lower Mainland` |
| `/services` | `towing services BC` | `battery boost BC`, `lockout service BC`, `vehicle recovery BC` |
| `/about` | `towing company BC` | `TowingNo.1`, `reliable towing Lower Mainland` |
| `/contact` | `contact towing company BC` | `tow truck phone number BC`, `roadside help BC` |
| `/blog` | `towing tips BC` | `road safety BC`, `winter driving BC` |

---

*Last updated: March 2026 — TowingNo.1 SEO Documentation*
